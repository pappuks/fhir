id {
  value: "opioidcds-recommendation-10"
}
text {
  status {
    value: GENERATED
  }
  div {
    value: "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative with Details</b></p><p><b>id</b>: opioidcds-recommendation-10</p><p><b>identifier</b>: OpioidCDS_REC_10 (OFFICIAL)</p><p><b>version</b>: 0.1.0</p><p><b>title</b>: Opioid CDS Logic for recommendation #10</p><p><b>status</b>: active</p><p><b>experimental</b>: false</p><p><b>type</b>: Logic Library <span>(Details : {http://terminology.hl7.org/CodeSystem/library-type code \'logic-library\' = \'Logic Library\', given as \'Logic Library\'})</span></p><p><b>date</b>: 25/03/2018 1:49:09 PM</p><p><b>publisher</b>: Centers for Disease Control and Prevention (CDC)</p><p><b>description</b>: Opioid decision support logic to evaluate whether the patient has had a urine screening in the past 12 months and provide analysis.</p><p><b>useContext</b>: , </p><p><b>jurisdiction</b>: United States of America <span>(Details : {urn:iso:std:iso:3166 code \'US\' = \'United States of America\', given as \'United States of America\'})</span></p><p><b>purpose</b>: The purpose of this library is to determine whether the patient has had a urine screening in the past 12 months. Is so, then check the results for missing opioids that are prescribed, present opioids that aren\'t prescribed or present illicit drugs.</p><p><b>usage</b>: This library is used to notify the prescriber/user whether the patient has had a urine screening in the past 12 months and to provide analysis if true.</p><p><b>copyright</b>: \302\251 CDC 2016+.</p><p><b>topic</b>: Opioid Prescribing <span>(Details )</span></p><p><b>author</b>: , , , </p><p><b>relatedArtifact</b>: , </p><p><b>dataRequirement</b>: , , , </p><p><b>content</b>: </p></div>"
  }
}
identifier {
  use {
    value: OFFICIAL
  }
  value {
    value: "OpioidCDS_REC_10"
  }
}
version {
  value: "0.1.0"
}
title {
  value: "Opioid CDS Logic for recommendation #10"
}
status {
  value: ACTIVE
}
experimental {
}
type {
  coding {
    system {
      value: "http://terminology.hl7.org/CodeSystem/library-type"
    }
    code {
      value: "logic-library"
    }
    display {
      value: "Logic Library"
    }
  }
}
date {
  value_us: 1522007349000000
  timezone: "-06:00"
  precision: SECOND
}
publisher {
  value: "Centers for Disease Control and Prevention (CDC)"
}
description {
  value: "Opioid decision support logic to evaluate whether the patient has had a urine screening in the past 12 months and provide analysis."
}
use_context {
  code {
    system {
      value: "http://terminology.hl7.org/CodeSystem/usage-context-type"
    }
    code {
      value: "focus"
    }
    display {
      value: "Clinical Focus"
    }
  }
  value {
    codeable_concept {
      coding {
        system {
          value: "http://snomed.info/sct"
        }
        code {
          value: "182888003"
        }
        display {
          value: "Medication requested (situation)"
        }
      }
    }
  }
}
use_context {
  code {
    system {
      value: "http://terminology.hl7.org/CodeSystem/usage-context-type"
    }
    code {
      value: "focus"
    }
    display {
      value: "Clinical Focus"
    }
  }
  value {
    codeable_concept {
      coding {
        system {
          value: "http://snomed.info/sct"
        }
        code {
          value: "82423001"
        }
        display {
          value: "Chronic pain (finding)"
        }
      }
    }
  }
}
jurisdiction {
  coding {
    system {
      value: "urn:iso:std:iso:3166"
    }
    code {
      value: "US"
    }
    display {
      value: "United States of America"
    }
  }
}
purpose {
  value: "The purpose of this library is to determine whether the patient has had a urine screening in the past 12 months. Is so, then check the results for missing opioids that are prescribed, present opioids that aren\'t prescribed or present illicit drugs."
}
usage {
  value: "This library is used to notify the prescriber/user whether the patient has had a urine screening in the past 12 months and to provide analysis if true."
}
copyright {
  value: "\302\251 CDC 2016+."
}
topic {
  text {
    value: "Opioid Prescribing"
  }
}
author {
  name {
    value: "Kensaku Kawamoto, MD, PhD, MHS"
  }
}
author {
  name {
    value: "Bryn Rhodes"
  }
}
author {
  name {
    value: "Floyd Eisenberg, MD, MPH"
  }
}
author {
  name {
    value: "Robert McClure, MD, MPH"
  }
}
related_artifact {
  type {
    value: DOCUMENTATION
  }
  display {
    value: "CDC guideline for prescribing opioids for chronic pain"
  }
  url {
    value: "https://guidelines.gov/summaries/summary/50153/cdc-guideline-for-prescribing-opioids-for-chronic-pain---united-states-2016#420"
  }
}
related_artifact {
  type {
    value: DEPENDS_ON
  }
  resource {
    value: "Library/opioidcds-common"
  }
}
data_requirement {
  type {
    value: MEDICATION_REQUEST
  }
  code_filter {
    path {
      value: "medicationCodeableConcept"
    }
    value_set {
      value: "http://example.org/fhir/ValueSet/opioids-indicating-end-of-life"
    }
  }
}
data_requirement {
  type {
    value: MEDICATION_REQUEST
  }
  code_filter {
    path {
      value: "medicationCodeableConcept"
    }
    value_set {
      value: "http://example.org/fhir/ValueSet/opioids-abused-in-ambulatory-care"
    }
  }
}
data_requirement {
  type {
    value: OBSERVATION
  }
  code_filter {
    path {
      value: "combo-code"
    }
    value_set {
      value: "http://example.org/fhir/ValueSet/illicit-drug-urine-screening"
    }
  }
}
data_requirement {
  type {
    value: OBSERVATION
  }
  code_filter {
    path {
      value: "combo-code"
    }
    value_set {
      value: "http://example.org/fhir/ValueSet/opioid-urine-screening"
    }
  }
}
content {
  content_type {
    value: "application/elm+xml"
  }
  data {
    value: "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<library xmlns=\"urn:hl7-org:elm:r1\" xmlns:t=\"urn:hl7-org:elm-types:r1\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:fhir=\"http://hl7.org/fhir\" xmlns:qdm43=\"urn:healthit-gov:qdm:v4_3\" xmlns:qdm53=\"urn:healthit-gov:qdm:v5_3\" xmlns:a=\"urn:hl7-org:cql-annotations:r1\">\n   <annotation startLine=\"62\" startChar=\"12\" endLine=\"62\" endChar=\"60\" message=\"Could not resolve code path medicationCodeableConcept for the type of the retrieve FHIR.MedicationRequest.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"62\" startChar=\"12\" endLine=\"62\" endChar=\"60\" message=\"Could not resolve membership operator for terminology target of the retrieve.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"66\" startChar=\"3\" endLine=\"66\" endChar=\"66\" message=\"Could not resolve code path medicationCodeableConcept for the type of the retrieve FHIR.MedicationRequest.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"66\" startChar=\"3\" endLine=\"66\" endChar=\"66\" message=\"Could not resolve membership operator for terminology target of the retrieve.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"74\" startChar=\"3\" endLine=\"74\" endChar=\"64\" message=\"Could not resolve code path combo-code for the type of the retrieve FHIR.Observation.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"74\" startChar=\"3\" endLine=\"74\" endChar=\"64\" message=\"Could not resolve membership operator for terminology target of the retrieve.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"79\" startChar=\"3\" endLine=\"79\" endChar=\"63\" message=\"Could not resolve code path combo-code for the type of the retrieve FHIR.Observation.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"79\" startChar=\"3\" endLine=\"79\" endChar=\"63\" message=\"Could not resolve membership operator for terminology target of the retrieve.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"134\" startChar=\"20\" endLine=\"134\" endChar=\"76\" message=\"List-valued expression was demoted to a singleton.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"143\" startChar=\"16\" endLine=\"143\" endChar=\"17\" message=\"List-valued expression was demoted to a singleton.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"157\" startChar=\"52\" endLine=\"157\" endChar=\"73\" message=\"List-valued expression was demoted to a singleton.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <annotation startLine=\"171\" startChar=\"62\" endLine=\"171\" endChar=\"78\" message=\"List-valued expression was demoted to a singleton.\" errorType=\"semantic\" errorSeverity=\"warning\" xsi:type=\"a:CqlToElmError\"/>\n   <identifier id=\"OpioidCDS_STU4_REC_10\" version=\"0.1.0\"/>\n   <schemaIdentifier id=\"urn:hl7-org:elm\" version=\"r1\"/>\n   <usings>\n      <def localIdentifier=\"System\" uri=\"urn:hl7-org:elm-types:r1\"/>\n      <def localIdentifier=\"FHIR\" uri=\"http://hl7.org/fhir\" version=\"3.2.0\"/>\n   </usings>\n   <includes>\n      <def localIdentifier=\"Common\" path=\"OpioidCDS_STU4_Common\" version=\"0.1.0\"/>\n   </includes>\n   <parameters>\n      <def name=\"ContextPrescriptions\" accessLevel=\"Public\">\n         <parameterTypeSpecifier xsi:type=\"ListTypeSpecifier\">\n            <elementType name=\"fhir:MedicationRequest\" xsi:type=\"NamedTypeSpecifier\"/>\n         </parameterTypeSpecifier>\n      </def>\n   </parameters>\n   <statements>\n      <def name=\"Patient\" context=\"Patient\">\n         <expression xsi:type=\"SingletonFrom\">\n            <operand dataType=\"fhir:Patient\" xsi:type=\"Retrieve\"/>\n         </expression>\n      </def>\n      <def name=\"Lookback Year\" context=\"Patient\" accessLevel=\"Public\">\n         <expression lowClosed=\"true\" highClosed=\"true\" xsi:type=\"Interval\">\n            <low xsi:type=\"Subtract\">\n               <operand xsi:type=\"Subtract\">\n                  <operand xsi:type=\"Today\"/>\n                  <operand value=\"12\" unit=\"months\" xsi:type=\"Quantity\"/>\n               </operand>\n               <operand value=\"1\" unit=\"days\" xsi:type=\"Quantity\"/>\n            </low>\n            <high xsi:type=\"Subtract\">\n               <operand xsi:type=\"Today\"/>\n               <operand value=\"1\" unit=\"day\" xsi:type=\"Quantity\"/>\n            </high>\n         </expression>\n      </def>\n      <def name=\"Validate Trigger Event\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Exists\">\n            <operand xsi:type=\"Query\">\n               <source alias=\"triggerScript\">\n                  <expression name=\"ContextPrescriptions\" xsi:type=\"ParameterRef\"/>\n               </source>\n               <where name=\"IsOpioidWithAmbulatoryAbusePotential\" libraryName=\"Common\" xsi:type=\"FunctionRef\">\n                  <operand name=\"ToCode\" libraryName=\"Common\" xsi:type=\"FunctionRef\">\n                     <operand xsi:type=\"Indexer\">\n                        <operand path=\"coding\" xsi:type=\"Property\">\n                           <source path=\"medication\" scope=\"triggerScript\" xsi:type=\"Property\"/>\n                        </operand>\n                        <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                     </operand>\n                  </operand>\n               </where>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Exclusion Criteria\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Or\">\n            <operand xsi:type=\"Exists\">\n               <operand dataType=\"fhir:MedicationRequest\" codeProperty=\"medicationCodeableConcept\" xsi:type=\"Retrieve\">\n                  <codes name=\"End Of Life Opioids\" libraryName=\"Common\" xsi:type=\"ValueSetRef\"/>\n               </operand>\n            </operand>\n            <operand name=\"HasMetastaticCancer\" libraryName=\"Common\" xsi:type=\"ExpressionRef\"/>\n         </expression>\n      </def>\n      <def name=\"Get Active Ambulatory Opioid Rx\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"Rx\">\n               <expression dataType=\"fhir:MedicationRequest\" codeProperty=\"medicationCodeableConcept\" xsi:type=\"Retrieve\">\n                  <codes name=\"Ambulatory Abuse Potential Opioids\" libraryName=\"Common\" xsi:type=\"ValueSetRef\"/>\n               </expression>\n            </source>\n            <where xsi:type=\"And\">\n               <operand xsi:type=\"Equal\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"status\" scope=\"Rx\" xsi:type=\"Property\"/>\n                  </operand>\n                  <operand valueType=\"t:String\" value=\"active\" xsi:type=\"Literal\"/>\n               </operand>\n               <operand xsi:type=\"Equal\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"code\" xsi:type=\"Property\">\n                        <source xsi:type=\"Indexer\">\n                           <operand xsi:type=\"Flatten\">\n                              <operand xsi:type=\"Query\">\n                                 <source alias=\"$this\">\n                                    <expression path=\"category\" scope=\"Rx\" xsi:type=\"Property\"/>\n                                 </source>\n                                 <where xsi:type=\"Not\">\n                                    <operand xsi:type=\"IsNull\">\n                                       <operand path=\"coding\" xsi:type=\"Property\">\n                                          <source name=\"$this\" xsi:type=\"AliasRef\"/>\n                                       </operand>\n                                    </operand>\n                                 </where>\n                                 <return>\n                                    <expression path=\"coding\" xsi:type=\"Property\">\n                                       <source name=\"$this\" xsi:type=\"AliasRef\"/>\n                                    </expression>\n                                 </return>\n                              </operand>\n                           </operand>\n                           <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                        </source>\n                     </source>\n                  </operand>\n                  <operand valueType=\"t:String\" value=\"outpatient\" xsi:type=\"Literal\"/>\n               </operand>\n            </where>\n         </expression>\n      </def>\n      <def name=\"Get Illicit Drug Urine Screenings in Last 12 Months\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"observation\">\n               <expression dataType=\"fhir:Observation\" codeProperty=\"combo-code\" xsi:type=\"Retrieve\">\n                  <codes name=\"Illicit Drug Screening\" libraryName=\"Common\" xsi:type=\"ValueSetRef\"/>\n               </expression>\n            </source>\n            <where xsi:type=\"In\">\n               <operand path=\"value\" xsi:type=\"Property\">\n                  <source path=\"effective\" scope=\"observation\" xsi:type=\"Property\"/>\n               </operand>\n               <operand name=\"Lookback Year\" xsi:type=\"ExpressionRef\"/>\n            </where>\n            <sort>\n               <by direction=\"asc\" xsi:type=\"ByExpression\">\n                  <expression path=\"value\" xsi:type=\"Property\">\n                     <source name=\"effective\" xsi:type=\"IdentifierRef\"/>\n                  </expression>\n               </by>\n            </sort>\n         </expression>\n      </def>\n      <def name=\"Most Recent Illicit Drug Urine Screenings in Last 12 Months\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Last\">\n            <source name=\"Get Illicit Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n         </expression>\n      </def>\n      <def name=\"Get Opioid Drug Urine Screenings in Last 12 Months\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"observation\">\n               <expression dataType=\"fhir:Observation\" codeProperty=\"combo-code\" xsi:type=\"Retrieve\">\n                  <codes name=\"Opioid Drug Screening\" libraryName=\"Common\" xsi:type=\"ValueSetRef\"/>\n               </expression>\n            </source>\n            <where xsi:type=\"In\">\n               <operand path=\"value\" xsi:type=\"Property\">\n                  <source path=\"effective\" scope=\"observation\" xsi:type=\"Property\"/>\n               </operand>\n               <operand name=\"Lookback Year\" xsi:type=\"ExpressionRef\"/>\n            </where>\n            <sort>\n               <by direction=\"asc\" xsi:type=\"ByExpression\">\n                  <expression path=\"value\" xsi:type=\"Property\">\n                     <source name=\"effective\" xsi:type=\"IdentifierRef\"/>\n                  </expression>\n               </by>\n            </sort>\n         </expression>\n      </def>\n      <def name=\"Most Recent Opioid Drug Urine Screenings in Last 12 Months\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Last\">\n            <source name=\"Get Opioid Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n         </expression>\n      </def>\n      <def name=\"No Urine Screening In Last 12 Months\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"And\">\n            <operand xsi:type=\"IsNull\">\n               <operand name=\"Most Recent Illicit Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n            <operand xsi:type=\"IsNull\">\n               <operand name=\"Most Recent Opioid Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Positive Opioid Drug Screening\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"mostRecentScreening\">\n               <expression name=\"Most Recent Opioid Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <where xsi:type=\"Or\">\n               <operand xsi:type=\"Equal\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"code\" xsi:type=\"Property\">\n                        <source xsi:type=\"Indexer\">\n                           <operand path=\"coding\" xsi:type=\"Property\">\n                              <source path=\"interpretation\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                           </operand>\n                           <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                        </source>\n                     </source>\n                  </operand>\n                  <operand valueType=\"t:String\" value=\"POS\" xsi:type=\"Literal\"/>\n               </operand>\n               <operand xsi:type=\"If\">\n                  <condition asType=\"t:Boolean\" xsi:type=\"As\">\n                     <operand xsi:type=\"Not\">\n                        <operand xsi:type=\"IsNull\">\n                           <operand xsi:type=\"Indexer\">\n                              <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                              <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                           </operand>\n                        </operand>\n                     </operand>\n                  </condition>\n                  <then xsi:type=\"Equal\">\n                     <operand path=\"value\" xsi:type=\"Property\">\n                        <source path=\"code\" xsi:type=\"Property\">\n                           <source xsi:type=\"Indexer\">\n                              <operand path=\"coding\" xsi:type=\"Property\">\n                                 <source path=\"interpretation\" xsi:type=\"Property\">\n                                    <source xsi:type=\"Indexer\">\n                                       <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                                       <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                    </source>\n                                 </source>\n                              </operand>\n                              <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                           </source>\n                        </source>\n                     </operand>\n                     <operand valueType=\"t:String\" value=\"POS\" xsi:type=\"Literal\"/>\n                  </then>\n                  <else valueType=\"t:Boolean\" value=\"false\" xsi:type=\"Literal\"/>\n               </operand>\n            </where>\n         </expression>\n      </def>\n      <def name=\"Orders Before Most Recent Opioid Screening\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"orders\">\n               <expression name=\"Get Active Ambulatory Opioid Rx\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <relationship alias=\"mostRecentScreening\" xsi:type=\"With\">\n               <expression name=\"Positive Opioid Drug Screening\" xsi:type=\"ExpressionRef\"/>\n               <suchThat xsi:type=\"Less\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"authoredOn\" scope=\"orders\" xsi:type=\"Property\"/>\n                  </operand>\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"effective\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                  </operand>\n               </suchThat>\n            </relationship>\n            <return>\n               <expression name=\"orders\" xsi:type=\"AliasRef\"/>\n            </return>\n         </expression>\n      </def>\n      <def name=\"Prescribed Opioids\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"orders\">\n               <expression name=\"Orders Before Most Recent Opioid Screening\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <return>\n               <expression xsi:type=\"Lower\">\n                  <operand xsi:type=\"SingletonFrom\">\n                     <operand name=\"GetIngredient\" libraryName=\"Common\" xsi:type=\"FunctionRef\">\n                        <operand name=\"ToCode\" libraryName=\"Common\" xsi:type=\"FunctionRef\">\n                           <operand xsi:type=\"Indexer\">\n                              <operand path=\"coding\" xsi:type=\"Property\">\n                                 <source path=\"medication\" scope=\"orders\" xsi:type=\"Property\"/>\n                              </operand>\n                              <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                           </operand>\n                        </operand>\n                     </operand>\n                  </operand>\n               </expression>\n            </return>\n         </expression>\n      </def>\n      <def name=\"GetOpioid\" context=\"Patient\" accessLevel=\"Public\" xsi:type=\"FunctionDef\">\n         <expression xsi:type=\"Case\">\n            <comparand name=\"value\" xsi:type=\"OperandRef\"/>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3299-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Acetaminophen\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"14184-6\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Atropine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"16485-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Bromodiphenhydramine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3408-2\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Brompheniramine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3414-0\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Buprenorphine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3421-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Butalbital\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"12333-1\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Butorphanol\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3423-1\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Caffeine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"21142-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Carisoprodol\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"16605-8\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Chlorcyclizine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3467-8\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Chlorpheniramine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3507-1\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Codeine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"14066-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Dihydrocodeine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3571-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Diphenhydramine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"11235-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Fentanyl\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"12308-3\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Hydrocodone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"9834-3\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Hydromorphone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"14071\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Ibuprofen\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3711-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Levorphanol\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3746-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Meperidine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3773-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Methadone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3830-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Morphine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"42618-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Naloxone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"12309-1\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Naltrexone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"10998-3\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Oxycodone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"11247-4\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Oxymorphone\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3917-2\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Pentazocine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3962-8\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Phenylephrine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3965-1\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Phenylpropanolamine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"11000-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Promethazine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"4003-0\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Pseudoephedrine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"4009-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Pyrilamine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"65807-0\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Tapentadol\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"43219-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Tramadol\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <else xsi:type=\"Concatenate\">\n               <operand valueType=\"t:String\" value=\"Unknown code: \" xsi:type=\"Literal\"/>\n               <operand name=\"value\" xsi:type=\"OperandRef\"/>\n            </else>\n         </expression>\n         <operand name=\"value\">\n            <operandTypeSpecifier name=\"t:String\" xsi:type=\"NamedTypeSpecifier\"/>\n         </operand>\n      </def>\n      <def name=\"Missing Opioids\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"If\">\n            <condition asType=\"t:Boolean\" xsi:type=\"As\">\n               <operand xsi:type=\"Not\">\n                  <operand xsi:type=\"IsNull\">\n                     <operand name=\"Positive Opioid Drug Screening\" xsi:type=\"ExpressionRef\"/>\n                  </operand>\n               </operand>\n            </condition>\n            <then xsi:type=\"Except\">\n               <operand xsi:type=\"Query\">\n                  <source alias=\"Prescriptions\">\n                     <expression name=\"Prescribed Opioids\" xsi:type=\"ExpressionRef\"/>\n                  </source>\n               </operand>\n               <operand xsi:type=\"ToList\">\n                  <operand xsi:type=\"Lower\">\n                     <operand name=\"GetOpioid\" xsi:type=\"FunctionRef\">\n                        <operand path=\"value\" xsi:type=\"Property\">\n                           <source path=\"code\" xsi:type=\"Property\">\n                              <source xsi:type=\"Indexer\">\n                                 <operand path=\"coding\" xsi:type=\"Property\">\n                                    <source path=\"code\" xsi:type=\"Property\">\n                                       <source name=\"Positive Opioid Drug Screening\" xsi:type=\"ExpressionRef\"/>\n                                    </source>\n                                 </operand>\n                                 <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                              </source>\n                           </source>\n                        </operand>\n                     </operand>\n                  </operand>\n               </operand>\n            </then>\n            <else xsi:type=\"As\">\n               <operand xsi:type=\"Null\"/>\n               <asTypeSpecifier xsi:type=\"ListTypeSpecifier\">\n                  <elementType name=\"t:String\" xsi:type=\"NamedTypeSpecifier\"/>\n               </asTypeSpecifier>\n            </else>\n         </expression>\n      </def>\n      <def name=\"Has Missing Opioids?\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Exists\">\n            <operand name=\"Missing Opioids\" xsi:type=\"ExpressionRef\"/>\n         </expression>\n      </def>\n      <def name=\"Get Opioids From Most Recent Screening\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"mostRecentScreening\">\n               <expression name=\"Positive Opioid Drug Screening\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <return>\n               <expression xsi:type=\"Union\">\n                  <operand xsi:type=\"ToList\">\n                     <operand xsi:type=\"Lower\">\n                        <operand name=\"GetOpioid\" xsi:type=\"FunctionRef\">\n                           <operand path=\"value\" xsi:type=\"Property\">\n                              <source path=\"code\" xsi:type=\"Property\">\n                                 <source xsi:type=\"Indexer\">\n                                    <operand path=\"coding\" xsi:type=\"Property\">\n                                       <source path=\"code\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                                    </operand>\n                                    <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                 </source>\n                              </source>\n                           </operand>\n                        </operand>\n                     </operand>\n                  </operand>\n                  <operand xsi:type=\"ToList\">\n                     <operand xsi:type=\"If\">\n                        <condition asType=\"t:Boolean\" xsi:type=\"As\">\n                           <operand xsi:type=\"Not\">\n                              <operand xsi:type=\"IsNull\">\n                                 <operand xsi:type=\"Indexer\">\n                                    <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                                    <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                 </operand>\n                              </operand>\n                           </operand>\n                        </condition>\n                        <then xsi:type=\"Lower\">\n                           <operand name=\"GetOpioid\" xsi:type=\"FunctionRef\">\n                              <operand path=\"value\" xsi:type=\"Property\">\n                                 <source path=\"code\" xsi:type=\"Property\">\n                                    <source xsi:type=\"Indexer\">\n                                       <operand path=\"coding\" xsi:type=\"Property\">\n                                          <source path=\"code\" xsi:type=\"Property\">\n                                             <source xsi:type=\"Indexer\">\n                                                <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                                                <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                             </source>\n                                          </source>\n                                       </operand>\n                                       <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                    </source>\n                                 </source>\n                              </operand>\n                           </operand>\n                        </then>\n                        <else asType=\"t:String\" xsi:type=\"As\">\n                           <operand xsi:type=\"SingletonFrom\">\n                              <operand xsi:type=\"List\"/>\n                           </operand>\n                        </else>\n                     </operand>\n                  </operand>\n               </expression>\n            </return>\n         </expression>\n      </def>\n      <def name=\"Unprescribed Opioids\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"mostRecentScreeningOpioids\">\n               <expression name=\"Get Opioids From Most Recent Screening\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <relationship alias=\"ingredients\" xsi:type=\"With\">\n               <expression name=\"Prescribed Opioids\" xsi:type=\"ExpressionRef\"/>\n               <suchThat xsi:type=\"Not\">\n                  <operand xsi:type=\"In\">\n                     <operand name=\"mostRecentScreeningOpioids\" xsi:type=\"AliasRef\"/>\n                     <operand xsi:type=\"ToList\">\n                        <operand name=\"ingredients\" xsi:type=\"AliasRef\"/>\n                     </operand>\n                  </operand>\n               </suchThat>\n            </relationship>\n            <return>\n               <expression name=\"mostRecentScreeningOpioids\" xsi:type=\"AliasRef\"/>\n            </return>\n         </expression>\n      </def>\n      <def name=\"Has Unprescribed Opioids?\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Exists\">\n            <operand name=\"Unprescribed Opioids\" xsi:type=\"ExpressionRef\"/>\n         </expression>\n      </def>\n      <def name=\"Positive Illicit Drug Screening\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Query\">\n            <source alias=\"mostRecentScreening\">\n               <expression name=\"Most Recent Illicit Drug Urine Screenings in Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n            </source>\n            <where xsi:type=\"Or\">\n               <operand xsi:type=\"Equal\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"code\" xsi:type=\"Property\">\n                        <source xsi:type=\"Indexer\">\n                           <operand path=\"coding\" xsi:type=\"Property\">\n                              <source path=\"interpretation\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                           </operand>\n                           <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                        </source>\n                     </source>\n                  </operand>\n                  <operand valueType=\"t:String\" value=\"POS\" xsi:type=\"Literal\"/>\n               </operand>\n               <operand xsi:type=\"If\">\n                  <condition asType=\"t:Boolean\" xsi:type=\"As\">\n                     <operand xsi:type=\"Not\">\n                        <operand xsi:type=\"IsNull\">\n                           <operand xsi:type=\"Indexer\">\n                              <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                              <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                           </operand>\n                        </operand>\n                     </operand>\n                  </condition>\n                  <then xsi:type=\"Equal\">\n                     <operand path=\"value\" xsi:type=\"Property\">\n                        <source path=\"code\" xsi:type=\"Property\">\n                           <source xsi:type=\"Indexer\">\n                              <operand path=\"coding\" xsi:type=\"Property\">\n                                 <source path=\"interpretation\" xsi:type=\"Property\">\n                                    <source xsi:type=\"Indexer\">\n                                       <operand path=\"component\" scope=\"mostRecentScreening\" xsi:type=\"Property\"/>\n                                       <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                                    </source>\n                                 </source>\n                              </operand>\n                              <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                           </source>\n                        </source>\n                     </operand>\n                     <operand valueType=\"t:String\" value=\"POS\" xsi:type=\"Literal\"/>\n                  </then>\n                  <else valueType=\"t:Boolean\" value=\"false\" xsi:type=\"Literal\"/>\n               </operand>\n            </where>\n         </expression>\n      </def>\n      <def name=\"Has Illicit Drugs in Screening?\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Exists\">\n            <operand xsi:type=\"ToList\">\n               <operand name=\"Positive Illicit Drug Screening\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Inclusion Criteria\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"And\">\n            <operand xsi:type=\"And\">\n               <operand xsi:type=\"And\">\n                  <operand name=\"Validate Trigger Event\" xsi:type=\"ExpressionRef\"/>\n                  <operand xsi:type=\"Not\">\n                     <operand name=\"Exclusion Criteria\" xsi:type=\"ExpressionRef\"/>\n                  </operand>\n               </operand>\n               <operand xsi:type=\"AnyTrue\">\n                  <source name=\"ProbableDaysInRange\" libraryName=\"Common\" xsi:type=\"FunctionRef\">\n                     <operand name=\"Get Active Ambulatory Opioid Rx\" xsi:type=\"ExpressionRef\"/>\n                     <operand valueType=\"t:Integer\" value=\"90\" xsi:type=\"Literal\"/>\n                     <operand valueType=\"t:Integer\" value=\"80\" xsi:type=\"Literal\"/>\n                  </source>\n               </operand>\n            </operand>\n            <operand xsi:type=\"Or\">\n               <operand xsi:type=\"Or\">\n                  <operand xsi:type=\"Or\">\n                     <operand name=\"No Urine Screening In Last 12 Months\" xsi:type=\"ExpressionRef\"/>\n                     <operand name=\"Has Missing Opioids?\" xsi:type=\"ExpressionRef\"/>\n                  </operand>\n                  <operand name=\"Has Unprescribed Opioids?\" xsi:type=\"ExpressionRef\"/>\n               </operand>\n               <operand name=\"Has Illicit Drugs in Screening?\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"GetIllicitDrug\" context=\"Patient\" accessLevel=\"Public\" xsi:type=\"FunctionDef\">\n         <expression xsi:type=\"Case\">\n            <comparand name=\"value\" xsi:type=\"OperandRef\"/>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3397-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Cocaine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"14267-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Methylenedioxymethamphetamine (MDMA)\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"29868-7\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Gamma Hydroxybutyric Acid (GHB)\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"12327-3\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Ketamine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3732-5\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Lysergic Acid Diethylamide (LSD)\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3779-6\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Methamphetamine\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"17504-2\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Psilocybin\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"41020-9\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Flunitrazepam (Rohypnol)\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <caseItem>\n               <when valueType=\"t:String\" value=\"3426-4\" xsi:type=\"Literal\"/>\n               <then valueType=\"t:String\" value=\"Tetrahydrocannabinol (THC)\" xsi:type=\"Literal\"/>\n            </caseItem>\n            <else xsi:type=\"Concatenate\">\n               <operand valueType=\"t:String\" value=\"Unknown code: \" xsi:type=\"Literal\"/>\n               <operand name=\"value\" xsi:type=\"OperandRef\"/>\n            </else>\n         </expression>\n         <operand name=\"value\">\n            <operandTypeSpecifier name=\"t:String\" xsi:type=\"NamedTypeSpecifier\"/>\n         </operand>\n      </def>\n      <def name=\"Inconsistent Illicit Drugs\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Concatenate\">\n            <operand valueType=\"t:String\" value=\"Found the following illicit drug(s) in urine drug screen: \" xsi:type=\"Literal\"/>\n            <operand xsi:type=\"If\">\n               <condition asType=\"t:Boolean\" xsi:type=\"As\">\n                  <operand xsi:type=\"IsNull\">\n                     <operand name=\"GetIllicitDrug\" xsi:type=\"FunctionRef\">\n                        <operand path=\"value\" xsi:type=\"Property\">\n                           <source path=\"code\" xsi:type=\"Property\">\n                              <source xsi:type=\"Indexer\">\n                                 <operand path=\"coding\" xsi:type=\"Property\">\n                                    <source path=\"code\" xsi:type=\"Property\">\n                                       <source name=\"Positive Illicit Drug Screening\" xsi:type=\"ExpressionRef\"/>\n                                    </source>\n                                 </operand>\n                                 <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                              </source>\n                           </source>\n                        </operand>\n                     </operand>\n                  </operand>\n               </condition>\n               <then name=\"GetIllicitDrug\" xsi:type=\"FunctionRef\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"code\" xsi:type=\"Property\">\n                        <source xsi:type=\"Indexer\">\n                           <operand path=\"coding\" xsi:type=\"Property\">\n                              <source path=\"interpretation\" xsi:type=\"Property\">\n                                 <source name=\"Positive Illicit Drug Screening\" xsi:type=\"ExpressionRef\"/>\n                              </source>\n                           </operand>\n                           <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                        </source>\n                     </source>\n                  </operand>\n               </then>\n               <else name=\"GetIllicitDrug\" xsi:type=\"FunctionRef\">\n                  <operand path=\"value\" xsi:type=\"Property\">\n                     <source path=\"code\" xsi:type=\"Property\">\n                        <source xsi:type=\"Indexer\">\n                           <operand path=\"coding\" xsi:type=\"Property\">\n                              <source path=\"code\" xsi:type=\"Property\">\n                                 <source name=\"Positive Illicit Drug Screening\" xsi:type=\"ExpressionRef\"/>\n                              </source>\n                           </operand>\n                           <operand valueType=\"t:Integer\" value=\"0\" xsi:type=\"Literal\"/>\n                        </source>\n                     </source>\n                  </operand>\n               </else>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Has Opioids in Screening?\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Exists\">\n            <operand xsi:type=\"ToList\">\n               <operand name=\"Positive Opioid Drug Screening\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Inconsistent Unprescribed Opioids\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Concatenate\">\n            <operand valueType=\"t:String\" value=\"Found the following unprescribed opioid(s): \" xsi:type=\"Literal\"/>\n            <operand xsi:type=\"SingletonFrom\">\n               <operand name=\"Unprescribed Opioids\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Inconsistent Missing Opioids\" context=\"Patient\" accessLevel=\"Public\">\n         <expression xsi:type=\"Concatenate\">\n            <operand valueType=\"t:String\" value=\"The following opioids are missing from the screening: \" xsi:type=\"Literal\"/>\n            <operand xsi:type=\"SingletonFrom\">\n               <operand name=\"Missing Opioids\" xsi:type=\"ExpressionRef\"/>\n            </operand>\n         </expression>\n      </def>\n      <def name=\"Get Indicator\" context=\"Patient\" accessLevel=\"Public\">\n         <expression valueType=\"t:String\" value=\"warning\" xsi:type=\"Literal\"/>\n      </def>\n   </statements>\n</library>\n"
  }
}
